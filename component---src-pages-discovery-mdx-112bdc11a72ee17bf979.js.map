{"version":3,"sources":["webpack://oauth.xyz/./src/pages/discovery.mdx","webpack://oauth.xyz/./src/components/header.js","webpack://oauth.xyz/./src/components/layout.js"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","title","keywords","to","parentName","from","language","codeString","code","grant_request_endpoint","interaction_start_modes_supported","interaction_finish_methods_supported","key_proofs_supported","subject_formats_supported","assertions_supported","introspection_endpoint","resource_registration_endpoint","token_formats_supported","isMDXComponent","menuLinks","name","link","location","className","style","margin","color","textDecoration","src","alt","map","class","children","maxWidth","padding","paddingTop"],"mappings":"mQAWaA,EAAe,GACtBC,EAAc,CAClBD,gBAEIE,EAAYC,IACH,SAASC,EAAT,GAGX,IAFFC,EAEC,EAFDA,WACGC,GACF,yBACD,OAAO,QAACJ,EAAD,iBAAeD,EAAiBK,EAAhC,CAAuCD,WAAYA,EAAYE,QAAQ,eAK5E,QAAC,IAAD,CAAKC,MAAM,YAAYC,SAAU,CAAC,QAAS,gBAAiB,YAAaF,QAAQ,SACjF,gCACA,mJAAqI,QAAC,KAAD,CAAMG,GAAG,WAAWH,QAAQ,QAA5B,WAArI,8ZAAwlB,QAAC,KAAD,CAAMG,GAAG,YAAYH,QAAQ,QAA7B,sCAAxlB,0EAAmvB,QAAC,KAAD,CAAMG,GAAG,YAAYH,QAAQ,QAA7B,iCAAnvB,MACA,+JACA,0CACA,iDAAmC,sBAAYI,WAAW,KAAvB,WAAnC,iCACA,QAAC,IAAD,CAAMC,KAAK,SAASF,GAAG,KAAKG,SAAS,OAAOC,WAAU,0DAC/BP,QAAQ,UAC/B,+FACA,QAAC,IAAD,CAAMK,KAAK,KAAKF,GAAG,SAASG,SAAS,OAAOE,KAAM,CAChDC,uBAAwB,gCACxBC,kCAAmC,CAAC,WAAY,YAAa,OAC7DC,qCAAsC,CAAC,WAAY,QACnDC,qBAAsB,CAAC,UAAW,OAAQ,QAC1CC,0BAA2B,CAAC,SAAU,SACtCC,qBAAsB,CAAC,aACtBd,QAAQ,UACX,6FACA,2OACA,sYACA,0CACA,8KAAgK,sBAAYI,WAAW,KAAvB,oBAAhK,8FAA0T,QAAC,KAAD,CAAMD,GAAG,WAAWH,QAAQ,QAA5B,sBAA1T,MACA,QAAC,IAAD,CAAMK,KAAK,KAAKF,GAAG,SAASG,SAAS,OAAOC,WAAU,0GACuBP,QAAQ,UACrF,sJAAwI,sBAAYI,WAAW,KAAvB,UAAxI,8bACA,sCACA,mQAAqP,sBAAYA,WAAW,KAAvB,0BAArP,kBACA,QAAC,IAAD,CAAMC,KAAK,KAAKF,GAAG,KAAKK,KAAM,CAC5BC,uBAAwB,+BACxBM,uBAAwB,wCACxBC,+BAAgC,sCAChCC,wBAAyB,CAAC,MAAO,WAChCjB,QAAQ,UACX,4JAKJH,EAAWqB,gBAAiB,G,0FC1DtBC,G,QAAY,CACZ,CACEC,KAAM,UACNC,KAAM,aAER,CACED,KAAM,WACNC,KAAM,cAER,CACED,KAAM,WACNC,KAAM,cAER,CACED,KAAM,cACNC,KAAM,iBAER,CACED,KAAM,OACNC,KAAM,UAER,CACED,KAAM,SACNC,KAAM,YAER,CACED,KAAM,YACNC,KAAM,eAER,CACED,KAAM,cACNC,KAAM,WAER,CACED,KAAM,QACNC,KAAM,aAiCd,EA7Be,SAAC,GAAD,EAAGC,SAAH,OACb,uBAAKC,UAAU,UACb,uBAAKA,UAAU,WACb,sBAAIC,MAAO,CAAEC,OAAQ,IACnB,gBAAC,KAAD,CACEtB,GAAG,IACHqB,MAAO,CACLE,MAAO,QACPC,eAAgB,SAGlB,uBAAKC,IAAI,WAAWC,IAAI,MAAMN,UAAU,SAP1C,2BAWE,2BAEIJ,EAAUW,KAAI,SAAAT,GAAI,OACd,gBAAC,KAAD,CAAMlB,GAAIkB,EAAKA,MAAM,iCAArB,IAA2CA,EAAKD,WAK9D,uBAAKW,MAAM,aCvCf,EApBe,SAAC,GAAD,IAAGC,EAAH,EAAGA,SAAH,OACT,gCACE,gBAAC,EAAD,MACA,uBACER,MAAO,CACLC,OAAQ,SACRQ,SAAU,IACVC,QAAS,wBACTC,WAAY,IAGbH","file":"component---src-pages-discovery-mdx-112bdc11a72ee17bf979.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/Users/jricher/Projects/oauth.xyz-site/src/components/layout.js\";\nimport { Link } from 'gatsby';\nimport SEO from '../components/seo';\nimport Code from '../components/code';\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n\n\n    <SEO title=\"Discovery\" keywords={['oauth', 'authorization', 'security']} mdxType=\"SEO\" />\n    <h1>{`Discovery`}</h1>\n    <p>{`With its negotiation-based design, GNAP minimizes the need for the client instance to do any pre-flight discovery. To start a `}<Link to=\"/request\" mdxType=\"Link\">{`request`}</Link>{`, the client instance only needs to know the single endpoint of the AS. Everything else can be negotiated dynamically. For example, the client indicates all of its supported interaction modes for a given request, and the AS responds to whichever ones from that set that it supports with the appropriate information for that interaction mode such as any URLs the client instance needs to send the user to. Even `}<Link to=\"/continue\" mdxType=\"Link\">{`continuation of an ongoing request`}</Link>{` uses access tokens and URLs that are given to the client instance in `}<Link to=\"/response\" mdxType=\"Link\">{`response to the first request`}</Link>{`.`}</p>\n    <p>{`Even with this design in mind, GNAP does include some optional discovery mechanisms to allow components to optimize their configurations.`}</p>\n    <h2>{`Client-AS Discovery`}</h2>\n    <p>{`The client can send an HTTP `}<inlineCode parentName=\"p\">{`OPTIONS`}</inlineCode>{` request to the AS endpoint.`}</p>\n    <Code from=\"client\" to=\"as\" language='http' codeString={`OPTIONS /transaction HTTP/1.1\nHost: server.example.com`} mdxType=\"Code\" />\n    <p>{`This returns a JSON document describing the server's supported features. `}</p>\n    <Code from=\"as\" to=\"client\" language='json' code={{\n      grant_request_endpoint: \"https://server.example.com/tx\",\n      interaction_start_modes_supported: [\"redirect\", \"user_code\", \"app\"],\n      interaction_finish_methods_supported: [\"redirect\", \"push\"],\n      key_proofs_supported: [\"httpsig\", \"mtls\", \"jwsd\"],\n      subject_formats_supported: [\"opaque\", \"email\"],\n      assertions_supported: [\"id_token\"]\n    }} mdxType=\"Code\" />\n    <p>{`Note that the OPTIONS discovery request is meant to be unauthenticated.`}</p>\n    <p>{`Clients can use this information to pre-configure an optimized request to the AS, if desired. However, it's not expected that most clients will need to do this kind of optimization as it costs an extra round trip.`}</p>\n    <p>{`Also note that presence of a value in the discovery document is not a guarantee that a client can use that feature. An AS is not obligated to allow any particular client or transaction request to use a given feature. For example, a client might be registered with a particular key proofing type and can therefore only use that type, even if the server supports others.`}</p>\n    <h2>{`Client-RS Discovery`}</h2>\n    <p>{`If a client instance calls a GNAP-protected RS without an access token, the RS can point the client to the appropriate AS to use for its request using a `}<inlineCode parentName=\"p\">{`WWW-Authenticate`}</inlineCode>{` header. This header points to the AS endpoint, which the client instance can call with a `}<Link to=\"/request\" mdxType=\"Link\">{`request for access`}</Link>{`.`}</p>\n    <Code from=\"rs\" to=\"client\" language=\"http\" codeString={`HTTP 401 Not Authorized\nWWW-Authenticate: GNAP as_uri=https://server.example/tx,access=FWWIKYBQ6U56NL1`} mdxType=\"Code\" />\n    <p>{`This response can also include a string that the client instance can use in its access token request as a reference value in the `}<inlineCode parentName=\"p\">{`access`}</inlineCode>{` array. This reference is meant to ensure the client will be able to access the resource it first tried to access. Since the original request was made without the context provided by an access token, this value represent's the RS's best guess as to what the client was asking for. The value can even be a dynamically-registered access reference value, if the RS and AS communicate at runtime, similar to UMA's permission registration system.`}</p>\n    <h2>{`RS-AS Discovery`}</h2>\n    <p>{`The AS can offer several functions that face RS's being protected, and to facilitate dynamic and programmatic configuration of these functions, the AS can offer a discovery document at a location based on the request endpoint's host with `}<inlineCode parentName=\"p\">{`.well-known/gnap-as-rs`}</inlineCode>{` as its path.`}</p>\n    <Code from=\"as\" to=\"rs\" code={{\n      grant_request_endpoint: \"https//server.example.com/tx\",\n      introspection_endpoint: \"https://server.example.com/introspect\",\n      resource_registration_endpoint: \"https://server.example.com/resource\",\n      token_formats_supported: [\"jwt\", \"paseto\"]\n    }} mdxType=\"Code\" />\n    <p>{`This is separated from the Client-AS discovery above because it's not expected that a client would ever see such a discovery document.`}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      ","import { Link, graphql } from 'gatsby'\nimport { Location } from '@reach/router';\nimport PropTypes from 'prop-types'\nimport React from 'react'\n\nconst menuLinks = [\n      {\n        name: 'Request',\n        link: '/request/'\n      },\n      {\n        name: 'Continue',\n        link: '/continue/'\n      },\n      {\n        name: 'Response',\n        link: '/response/'\n      },\n      {\n        name: 'Interaction',\n        link: '/interaction/'\n      },\n      {\n        name: 'Keys',\n        link: '/keys/'\n      },\n      {\n        name: 'Tokens',\n        link: '/tokens/'\n      },\n      {\n        name: 'Discovery',\n        link: '/discovery/'\n      },\n      {\n        name: 'Other Specs',\n        link: '/specs/'\n      },\n      {\n        name: 'About',\n        link: '/about/'\n      },\n]\n\nconst Header = ({ location }) => (\n  <div className=\"header\">\n    <div className=\"wrapper\">\n      <h1 style={{ margin: 0 }}>\n        <Link\n          to=\"/\"\n          style={{\n            color: 'white',\n            textDecoration: 'none',\n          }}\n        >\n          <img src=\"/xyz.png\" alt=\"XYZ\" className=\"logo\" />\n          XYZ: Implementing GNAP\n        </Link>\n      </h1>\n          <nav>\n            {\n              menuLinks.map(link =>\n                  <Link to={link.link}><span>&raquo;</span> {link.name}</Link>\n              )\n            }\n          </nav>\n    </div>\n    <div class=\"subnav\">\n            \n    </div>\n  </div>\n)\n\nexport default Header\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { StaticQuery, graphql } from 'gatsby'\n\nimport Header from './header'\nimport 'bootstrap/dist/css/bootstrap.css'\nimport './layout.css'\n\nconst Layout = ({ children }) => (\n      <>\n        <Header/>\n        <div\n          style={{\n            margin: '0 auto',\n            maxWidth: 960,\n            padding: '0px 1.0875rem 1.45rem',\n            paddingTop: 0,\n          }}\n        >\n          {children}\n        </div>\n      </>\n)\n\nLayout.propTypes = {\n  children: PropTypes.node.isRequired,\n}\n\nexport default Layout\n"],"sourceRoot":""}