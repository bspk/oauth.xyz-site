{"version":3,"sources":["webpack://oauth.xyz/./src/pages/keys.mdx","webpack://oauth.xyz/./src/components/header.js","webpack://oauth.xyz/./src/components/layout.js"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","title","keywords","parentName","from","to","code","client","href","language","codeString","isMDXComponent","menuLinks","name","link","location","className","style","margin","color","textDecoration","src","alt","map","class","children","maxWidth","padding","paddingTop"],"mappings":"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","file":"component---src-pages-keys-mdx-e166918fb3dcd4073c8b.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/Users/jricher/Projects/oauth.xyz-site/src/components/layout.js\";\nimport SEO from '../components/seo';\nimport Code from '../components/code';\nimport { Link } from 'gatsby';\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n\n    <SEO title=\"Keys\" keywords={['oauth', 'authorization', 'security']} mdxType=\"SEO\" />\n    <h1>{`Key Types`}</h1>\n    <p>{`Client instances in GNAP are always identified by their key. This key can be presented as a value or as a reference. The key binds the client instance during the grant process and proof of that key must be presented for all requests. `}</p>\n    <p>{`GNAP does not differentiate between pre-registered and dynamically-presented keys, though GNAP allows the AS to differentiate between keys it has seen before and those it has not. The AS can allow clients to dynamically present and prove a new key at runtime, such as a key generated on a client device and bound to only that instance of the client software on that device. If some keys are known ahead of time through a registration or other derivation process, the AS can restrict access to certain kinds of requests for these keys associated with particular clients.`}</p>\n    <h2>{`JSON Web Key (JWK)`}</h2>\n    <p>{`This client sends its public key to the server formatted as a JSON Web Key (JWK). The keys must have a `}<inlineCode parentName=\"p\">{`kid`}</inlineCode>{` (key identifier) field and an `}<inlineCode parentName=\"p\">{`alg`}</inlineCode>{` (algorithm) field.`}</p>\n    <Code from=\"client\" to=\"as\" code={{\n      \"client\": {\n        \"key\": {\n          \"jwk\": {\n            \"kty\": \"RSA\",\n            \"e\": \"AQAB\",\n            \"kid\": \"xyz-1\",\n            \"alg\": \"RS256\",\n            \"n\": \"kOB5rR4Jv0GMeLaY6_It_r3ORwdf8ci_JtffXyaSx8xYJCCNaOKNJn_Oz0YhdHbXTeWO5AoyspDWJbN5w_7bdWDxgpD-y6jnD1u9YhBOCWObNPFvpkTM8LC7SdXGRKx2k8Me2r_GssYlyRpqvpBlY5-ejCywKRBfctRcnhTTGNztbbDBUyDSWmFMVCHe5mXT4cL0BwrZC6S-uu-LAx06aKwQOPwYOGOslK8WPm1yGdkaA1uF_FpS6LS63WYPHi_Ap2B7_8Wbw4ttzbMS_doJvuDagW8A1Ip3fXFAHtRAcKw7rdI4_Xln66hJxFekpdfWdiPQddQ6Y1cK2U3obvUg7w\"\n          }\n        }\n      }\n    }} mdxType=\"Code\" />\n    <h2>{`X509 Certificate`}</h2>\n    <p>{`The client indicates its certificate as either an encoded certificate string, or as a certificate thumbprint as in OAuth 2's certificate-bound access token methods.`}</p>\n    <Code from=\"client\" to=\"as\" code={{\n      client: {\n        \"key\": {\n          \"cert\": \"MIIEHDCCAwSgAwIBAgIBATANBgkqhkiG9w0BAQsFADCBmjE3MDUGA1UEAwwuQmVzcG9rZSBFbmdpbmVlcmluZyBSb290IENlcnRpZmljYXRlIEF1dGhvcml0eTELMAkGA1UECAwCTUExCzAJBgNVBAYTAlVTMRkwFwYJKoZIhvcNAQkBFgpjYUBic3BrLmlvMRwwGgYDVQQKDBNCZXNwb2tlIEVuZ2luZWVyaW5nMQwwCgYDVQQLDANNVEkwHhcNMTkwNDEwMjE0MDI5WhcNMjQwNDA4MjE0MDI5WjB8MRIwEAYDVQQDDAlsb2NhbGhvc3QxCzAJBgNVBAgMAk1BMQswCQYDVQQGEwJVUzEgMB4GCSqGSIb3DQEJARYRdGxzY2xpZW50QGJzcGsuaW8xHDAaBgNVBAoME0Jlc3Bva2UgRW5naW5lZXJpbmcxDDAKBgNVBAsMA01USTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMmaXQHbs/wc1RpsQ6Orzf6rN+q2ijaZbQxD8oi+XaaN0P/gnE13JqQduvdq77OmJ4bQLokqsd0BexnI07Njsl8nkDDYpe8rNve5TjyUDCfbwgS7U1CluYenXmNQbaYNDOmCdHwwUjV4kKREg6DGAx22Oq7+VHPTeeFgyw4kQgWRSfDENWY3KUXJlb/vKR6lQ+aOJytkvj8kVZQtWupPbvwoJe0na/ISNAOhL74w20DWWoDKoNltXsEtflNljVoi5nqsmZQcjfjt6LO0T7O1OX3Cwu2xWx8KZ3n/2ocuRqKEJHqUGfeDtuQNt6Jz79v/OTr8puLWaD+uyk6NbtGjoQsCAwEAAaOBiTCBhjAJBgNVHRMEAjAAMAsGA1UdDwQEAwIF4DBsBgNVHREEZTBjgglsb2NhbGhvc3SCD3Rsc2NsaWVudC5sb2NhbIcEwKgBBIERdGxzY2xpZW50QGJzcGsuaW+GF2h0dHA6Ly90bHNjbGllbnQubG9jYWwvhhNzc2g6dGxzY2xpZW50LmxvY2FsMA0GCSqGSIb3DQEBCwUAA4IBAQCKKv8WlLrT4Z5NazaUrYtlTF+2v0tvZBQ7qzJQjlOqAcvxry/d2zyhiRCRS/v318YCJBEv4Iq2W3I3JMMyAYEe2573HzT7rH3xQP12yZyRQnetdiVM1Z1KaXwfrPDLs72hUeELtxIcfZ0M085jLboXhufHI6kqm3NCyCCTihe2ck5RmCc5l2KBO/vAHF0ihhFOOOby1v6qbPHQcxAU6rEb907/p6BW/LV1NCgYB1QtFSfGxowqb9FRIMD2kvMSmO0EMxgwZ6k6spa+jk0IsI3klwLW9b+Tfn/daUbIDctxeJneq2anQyU2znBgQl6KILDSF4eaOqlBut/KNZHHazJh\"\n        }\n      }\n    }} mdxType=\"Code\" />\n    <Code from=\"client\" to=\"as\" code={{\n      client: {\n        \"key\": {\n          \"cert#S256\": \"bwcK0esc3ACC3DB2Y5_lESsXE8o9ltc05O89jdN-dg2\"\n        }\n      }\n    }} mdxType=\"Code\" />\n    <h2>{`Key Reference`}</h2>\n    <p>{`If a client instance has a reference to its key that is known to the AS, the client can present that reference in lieu of the key itself. No format is given for this value, and dereferencing it is up to the AS.`}</p>\n    <Code from=\"client\" to=\"as\" code={{\n      client: {\n        \"key\": \"QYDVQQGEwJVUzEgMB4GCSqGSIb3DQEJARYRdGxzY2xpZW50QGJzcG\"\n      }\n    }} mdxType=\"Code\" />\n    <p>{`The AS can identify which key the client is presenting from this reference handle and ensure that the correct key is used in the request. The proofing method is also locked when a key is passed by reference, and the client cannot alter it. Alternatively, a client instance can be identified by its `}<inlineCode parentName=\"p\">{`instance_id`}</inlineCode>{`, which also implies a specific known key material and proof method.`}</p>\n    <Code from=\"client\" to=\"as\" code={{\n      client: 'xyz-client-1234a'\n    }} mdxType=\"Code\" />\n    <h1>{`Presentation Proofing Types`}</h1>\n    <p>{`When the client starts a `}<Link to=\"/transactionrequest\" mdxType=\"Link\">{`request`}</Link>{` or continues an ongoing transaction, it must prove possession of any presented keys. The type of proof is indicated by the `}<inlineCode parentName=\"p\">{`proof`}</inlineCode>{` parameter value, which currently has the following values defined:`}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`httpsig`}</inlineCode>{`: HTTP Request Signature (previously known as \"Cavage signatures\")`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`mtls`}</inlineCode>{`: Mutual TLS `}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`jwsd`}</inlineCode>{`: Detached JSON Web Signature`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`jws`}</inlineCode>{`: Attached (internal) JSON Web Signature`}</li>\n    </ul>\n    <h2>{`HTTP Signatures`}</h2>\n    <p>{`This key presentation method is indicated by the `}<inlineCode parentName=\"p\">{`httpsig`}</inlineCode>{` value of the `}<inlineCode parentName=\"p\">{`proof`}</inlineCode>{` field, and it uses the signature method in `}<a href=\"https://tools.ietf.org/html/draft-ietf-httpbis-message-signatures\">{`Signing HTTP Messages`}</a>{`. The signature is presented in the `}<inlineCode parentName=\"p\">{`Signature`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`Signature-Input`}</inlineCode>{` headers, and it has to cover the body through use of the HTTP `}<inlineCode parentName=\"p\">{`Digest`}</inlineCode>{` header. The signing algorithm is indicated inside the client's `}<inlineCode parentName=\"p\">{`key`}</inlineCode>{` field, in this example using the JWA algorithm `}<inlineCode parentName=\"p\">{`ES256`}</inlineCode>{`. The ID of the client instance's key is passed as the `}<inlineCode parentName=\"p\">{`keyid`}</inlineCode>{` signature parameter.`}</p>\n    <Code from=\"client\" to=\"as\" language='http' codeString={`POST /tx HTTP/1.1\nHost: server.example.com\nContent-Type: application/json\nContent-Length: 716\nSignature-Input: gnap=(\"digest\" \"host\" \"@request-target\");created=1624564850;keyid=\"xyz-client\"\nSignature: gnap=:46vxgqlDkIgtQQVo9RQO+7v0vaxFpuGilltM7/q+mJ7s0fnvq0a83PTZNRb7YaWwwkrghBYYugahokV9eHCROg==:\nDigest: SHA=oZz2O3kg5SEFAhmr0xEBbc4jEfo=\n \n{\n    \"client\": {\n        \"key\": {\n    \t\t\"proof\": \"httpsig\",\n            \"jwk\": {\n                \"kty\": \"EC\",\n                \"crv\": \"P-256\",\n                \"x\": \"m5dnqNXawIKF3qyCfs_raR1LtTKUtyf4t2uVa4Wmd6A\",\n                \"y\": \"prF8Lo5JC2JTyj2GwtaI2LWWEaRa6v6XykjUMg-9C1U\",\n                \"alg\": \"ES256\"\n            }\n        },\n        \"display\": {\n            \"name\": \"My Client Display Name\",\n            \"uri\": \"https://example.net/client\"\n        }\n    },\n    \"access_token\": {\n        \"access\": [ \"dolphin-metadata\" ]\n    }\n    \"interact\": {\n        \"start\": [ \"redirect\" ],\n        \"finish\": {\n            \"method\": \"callback\",\n    \t\t\"uri\": \"https://client.foo\",\n    \t\t\"nonce\": \"VJLO6A4CAYLBXHTR0KRO\"\n    \t}\n    },\n}\n`} mdxType=\"Code\" />\n    <p>{`This method only protects the body if the `}<inlineCode parentName=\"p\">{`Digest`}</inlineCode>{` header is included in the request and as part of the signature. `}</p>\n    <h2>{`Mutual TLS`}</h2>\n    <p>{`The `}<inlineCode parentName=\"p\">{`mtls`}</inlineCode>{` key presentation method uses the client certificate presented at the TLS layer to authorize the transaction. No additional fields or headers are added to the HTTP message or JSON body, though a TLS terminating reverse proxy can communicate the client certificate to the AS through a special header, `}<inlineCode parentName=\"p\">{`SSL_CLIENT_CERT`}</inlineCode>{` in this example. `}</p>\n    <Code from=\"client\" to=\"as\" language='http' codeString={`POST /transaction HTTP/1.1\nHost: server.example.com\nContent-Type: application/json\nClient-Cert: :MIIEHDCCAwSgAwIBAgIBATANBgkqhkiG9w0BAQsFADCBmjE3MDUGA1UEAwwuQmVzcG9rZSBFbmdpbmVlcmluZyBSb290IENlcnRpZmljYXRlIEF1dGhvcml0eTELMAkGA1UECAwCTUExCzAJBgNVBAYTAlVTMRkwFwYJKoZIhvcNAQkBFgpjYUBic3BrLmlvMRwwGgYDVQQKDBNCZXNwb2tlIEVuZ2luZWVyaW5nMQwwCgYDVQQLDANNVEkwHhcNMTkwNDEwMjE0MDI5WhcNMjQwNDA4MjE0MDI5WjB8MRIwEAYDVQQDDAlsb2NhbGhvc3QxCzAJBgNVBAgMAk1BMQswCQYDVQQGEwJVUzEgMB4GCSqGSIb3DQEJARYRdGxzY2xpZW50QGJzcGsuaW8xHDAaBgNVBAoME0Jlc3Bva2UgRW5naW5lZXJpbmcxDDAKBgNVBAsMA01USTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMmaXQHbs/wc1RpsQ6Orzf6rN+q2ijaZbQxD8oi+XaaN0P/gnE13JqQduvdq77OmJ4bQLokqsd0BexnI07Njsl8nkDDYpe8rNve5TjyUDCfbwgS7U1CluYenXmNQbaYNDOmCdHwwUjV4kKREg6DGAx22Oq7+VHPTeeFgyw4kQgWRSfDENWY3KUXJlb/vKR6lQ+aOJytkvj8kVZQtWupPbvwoJe0na/ISNAOhL74w20DWWoDKoNltXsEtflNljVoi5nqsmZQcjfjt6LO0T7O1OX3Cwu2xWx8KZ3n/2ocuRqKEJHqUGfeDtuQNt6Jz79v/OTr8puLWaD+uyk6NbtGjoQsCAwEAAaOBiTCBhjAJBgNVHRMEAjAAMAsGA1UdDwQEAwIF4DBsBgNVHREEZTBjgglsb2NhbGhvc3SCD3Rsc2NsaWVudC5sb2NhbIcEwKgBBIERdGxzY2xpZW50QGJzcGsuaW+GF2h0dHA6Ly90bHNjbGllbnQubG9jYWwvhhNzc2g6dGxzY2xpZW50LmxvY2FsMA0GCSqGSIb3DQEBCwUAA4IBAQCKKv8WlLrT4Z5NazaUrYtlTF+2v0tvZBQ7qzJQjlOqAcvxry/d2zyhiRCRS/v318YCJBEv4Iq2W3I3JMMyAYEe2573HzT7rH3xQP12yZyRQnetdiVM1Z1KaXwfrPDLs72hUeELtxIcfZ0M085jLboXhufHI6kqm3NCyCCTihe2ck5RmCc5l2KBO/vAHF0ihhFOOOby1v6qbPHQcxAU6rEb907/p6BW/LV1NCgYB1QtFSfGxowqb9FRIMD2kvMSmO0EMxgwZ6k6spa+jk0IsI3klwLW9b+Tfn/daUbIDctxeJneq2anQyU2znBgQl6KILDSF4eaOqlBut/KNZHHazJh:\n \n{\n    \"client\": {\n        \"key\": {\n            \"proof\": \"mtls\",\n            \"cert\": \"MIIEHDCCAwSgAwIBAgIBATANBgkqhkiG9w0BAQsFADCBmjE3MDUGA1UEAwwuQmVzcG9rZSBFbmdpbmVlcmluZyBSb290IENlcnRpZmljYXRlIEF1dGhvcml0eTELMAkGA1UECAwCTUExCzAJBgNVBAYTAlVTMRkwFwYJKoZIhvcNAQkBFgpjYUBic3BrLmlvMRwwGgYDVQQKDBNCZXNwb2tlIEVuZ2luZWVyaW5nMQwwCgYDVQQLDANNVEkwHhcNMTkwNDEwMjE0MDI5WhcNMjQwNDA4MjE0MDI5WjB8MRIwEAYDVQQDDAlsb2NhbGhvc3QxCzAJBgNVBAgMAk1BMQswCQYDVQQGEwJVUzEgMB4GCSqGSIb3DQEJARYRdGxzY2xpZW50QGJzcGsuaW8xHDAaBgNVBAoME0Jlc3Bva2UgRW5naW5lZXJpbmcxDDAKBgNVBAsMA01USTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMmaXQHbs/wc1RpsQ6Orzf6rN+q2ijaZbQxD8oi+XaaN0P/gnE13JqQduvdq77OmJ4bQLokqsd0BexnI07Njsl8nkDDYpe8rNve5TjyUDCfbwgS7U1CluYenXmNQbaYNDOmCdHwwUjV4kKREg6DGAx22Oq7+VHPTeeFgyw4kQgWRSfDENWY3KUXJlb/vKR6lQ+aOJytkvj8kVZQtWupPbvwoJe0na/ISNAOhL74w20DWWoDKoNltXsEtflNljVoi5nqsmZQcjfjt6LO0T7O1OX3Cwu2xWx8KZ3n/2ocuRqKEJHqUGfeDtuQNt6Jz79v/OTr8puLWaD+uyk6NbtGjoQsCAwEAAaOBiTCBhjAJBgNVHRMEAjAAMAsGA1UdDwQEAwIF4DBsBgNVHREEZTBjgglsb2NhbGhvc3SCD3Rsc2NsaWVudC5sb2NhbIcEwKgBBIERdGxzY2xpZW50QGJzcGsuaW+GF2h0dHA6Ly90bHNjbGllbnQubG9jYWwvhhNzc2g6dGxzY2xpZW50LmxvY2FsMA0GCSqGSIb3DQEBCwUAA4IBAQCKKv8WlLrT4Z5NazaUrYtlTF+2v0tvZBQ7qzJQjlOqAcvxry/d2zyhiRCRS/v318YCJBEv4Iq2W3I3JMMyAYEe2573HzT7rH3xQP12yZyRQnetdiVM1Z1KaXwfrPDLs72hUeELtxIcfZ0M085jLboXhufHI6kqm3NCyCCTihe2ck5RmCc5l2KBO/vAHF0ihhFOOOby1v6qbPHQcxAU6rEb907/p6BW/LV1NCgYB1QtFSfGxowqb9FRIMD2kvMSmO0EMxgwZ6k6spa+jk0IsI3klwLW9b+Tfn/daUbIDctxeJneq2anQyU2znBgQl6KILDSF4eaOqlBut/KNZHHazJh\"\n        },\n        \"display\": {\n            \"name\": \"My Client Display Name\",\n            \"uri\": \"https://example.net/client\"\n        }\n    },\n    \"resources\": [\n        \"dolphin-metadata\"\n    ],\n    \"interact\": {\n        \"redirect\": true,\n        \"callback\": {\n    \t\t\"uri\": \"https://client.foo\",\n    \t\t\"nonce\": \"VJLO6A4CAYLBXHTR0KRO\"\n    \t}\n    }\n}\n`} mdxType=\"Code\" />\n    <p>{`Notice that in this example, the same certificate is presented in slightly different serializations: the header includes whitespace between sections whereas the JSON value does not. The AS needs to parse both of these strings as certificates to compare them to each other properly instead of just doing a simple string comparison. `}</p>\n    <h2>{`Detached JSON Web Signature`}</h2>\n    <p>{`This key presentation method is indicated by the `}<inlineCode parentName=\"p\">{`jwsd`}</inlineCode>{` value of the `}<inlineCode parentName=\"p\">{`proof`}</inlineCode>{` field and uses a detached JWS to sign the request. `}</p>\n    <p>{`The header of the JWS must include the key ID, the algorithm (which must not be `}<inlineCode parentName=\"p\">{`none`}</inlineCode>{`), and other attributes relating to the request such as the URI and method.`}</p>\n    <Code code={{\n      \"alg\": \"RS256\",\n      \"kid\": \"gnap-rsa\",\n      \"uri\": \"https://server.example.com/gnap\",\n      \"htm\": \"POST\",\n      \"typ\": \"gnap-binding+jwsd\",\n      \"created\": 1618884475\n    }} mdxType=\"Code\" />\n    <p>{`The body is hashed using SHA256 and encoded in Base64.`}</p>\n    <Code language=\"plain\" codeString='PGiVuOZUcN1tRtUS6tx2b4cBgw9mPgXG3IPB3wY7ctc' mdxType=\"Code\" />\n    <p>{`The resulting JWS object is sent in the `}<inlineCode parentName=\"p\">{`Detached-JWS`}</inlineCode>{` header.`}</p>\n    <Code from=\"client\" to=\"as\" language='http' codeString={`POST /gnap HTTP/1.1\nHost: server.example.com\nContent-Type: application/json\nContent-Length: 983\nDetached-JWS: eyJhbGciOiJSUzI1NiIsImNyZWF0ZWQiOjE2MTg4ODQ0NzUsImh0bSI6IlBPU1QiLCJraWQiOiJnbmFwLXJzYSIsInR5cCI6ImduYXAtYmluZGluZytqd3NkIiwidXJpIjoiaHR0cHM6Ly9zZXJ2ZXIuZXhhbXBsZS5jb20vZ25hcCJ9.PGiVuOZUcN1tRtUS6tx2b4cBgw9mPgXG3IPB3wY7ctc.fUq-SV-A1iFN2MwCRW_yolVtT2_TZA2h5YeXUoi5F2Q2iToC0Tc4drYFOSHIX68knd68RUA7yHqCVP-ZQEd6aL32H69e9zuMiw6O_s4TBKB3vDOvwrhYtDH6fX2hP70cQoO-47OwbqP-ifkrvI3hVgMX9TfjVeKNwnhoNnw3vbu7SNKeqJEbbwZfpESaGepS52xNBlDNMYBQQXxM9OqKJaXffzLFEl-Xe0UnfolVtBraz3aPrPy1C6a4uT7wLda3PaTOVtgysxzii3oJWpuz0WP5kRujzDFwX_EOzW0jsjCSkL-PXaKSpZgEjNjKDMg9irSxUISt1C1T6q3SzRgfuQ\n \n{\n    \"access_token\": {\n        \"access\": [\n            \"dolphin-metadata\"\n        ]\n    },\n    \"interact\": {\n        \"start\": [\"redirect\"],\n        \"finish\": {\n            \"method\": \"redirect\",\n            \"uri\": \"https://client.foo/callback\",\n            \"nonce\": \"VJLO6A4CAYLBXHTR0KRO\"\n        }\n    },\n    \"client\": {\n      \"proof\": \"jwsd\",\n      \"key\": {\n        \"jwk\": {\n            \"kid\": \"gnap-rsa\",\n            \"kty\": \"RSA\",\n            \"e\": \"AQAB\",\n            \"alg\": \"RS256\",\n            \"n\": \"hYOJ-XOKISdMMShn_G4W9m20mT0VWtQBsmBBkI2cmRt4Ai8BfYdHsFzAtYKOjpBR1RpKpJmVKxIGNy0g6Z3ad2XYsh8KowlyVy8IkZ8NMwSrcUIBZGYXjHpwjzvfGvXH_5KJlnR3_uRUp4Z4Ujk2bCaKegDn11V2vxE41hqaPUnhRZxe0jRETddzsE3mu1SK8dTCROjwUl14mUNo8iTrTm4n0qDadz8BkPo-uv4BC0bunS0K3bA_3UgVp7zBlQFoFnLTO2uWp_muLEWGl67gBq9MO3brKXfGhi3kOzywzwPTuq-cVQDyEN7aL0SxCb3Hc4IdqDaMg8qHUyObpPitDQ\"\n        }\n      }\n      \"display\": {\n        \"name\": \"My Client Display Name\",\n        \"uri\": \"https://client.foo/\"\n      },\n    }\n}\n`} mdxType=\"Code\" />\n    <h2>{`Attached (Internal) JSON Web Signature`}</h2>\n    <p>{`This key presentation method is indicated by the `}<inlineCode parentName=\"p\">{`jwsd`}</inlineCode>{` value of the `}<inlineCode parentName=\"p\">{`proof`}</inlineCode>{` field and uses a JWS as the body of the request. The normal JSON request body is sent as the JWS payload and the whole JWS is sent as the HTTP request body along with a content type of `}<inlineCode parentName=\"p\">{`application/jose`}</inlineCode>{`. The JWS header is created in the same fashion as the detached JWS method.`}</p>\n    <Code from=\"client\" to=\"as\" language='http' codeString={`POST /gnap HTTP/1.1\nHost: server.example.com\nContent-Type: application/jose\nContent-Length: 1047\n \neyJhbGciOiJSUzI1NiIsImNyZWF0ZWQiOjE2MTg4ODQ0NzUsImh0bSI6IlBPU1QiLCJraWQiOiJnbmFwLXJzYSIsInR5cCI6ImduYXAtYmluZGluZytqd3NkIiwidXJpIjoiaHR0cHM6Ly9zZXJ2ZXIuZXhhbXBsZS5jb20vZ25hcCJ9.CnsKICAgICJhY2Nlc3NfdG9rZW4iOiB7CiAgICAgICAgImFjY2VzcyI6IFsKICAgICAgICAgICAgImRvbHBoaW4tbWV0YWRhdGEiCiAgICAgICAgXQogICAgfSwKICAgICJpbnRlcmFjdCI6IHsKICAgICAgICAic3RhcnQiOiBbInJlZGlyZWN0Il0sCiAgICAgICAgImZpbmlzaCI6IHsKICAgICAgICAgICAgIm1ldGhvZCI6ICJyZWRpcmVjdCIsCiAgICAgICAgICAgICJ1cmkiOiAiaHR0cHM6Ly9jbGllbnQuZm9vL2NhbGxiYWNrIiwKICAgICAgICAgICAgIm5vbmNlIjogIlZKTE82QTRDQVlMQlhIVFIwS1JPIgogICAgICAgIH0KICAgIH0sCiAgICAiY2xpZW50IjogewogICAgICAicHJvb2YiOiAiandzIiwKICAgICAgImtleSI6IHsKICAgICAgICAiandrIjogewogICAgICAgICAgICAia2lkIjogImduYXAtcnNhIiwKICAgICAgICAgICAgImt0eSI6ICJSU0EiLAogICAgICAgICAgICAiZSI6ICJBUUFCIiwKICAgICAgICAgICAgImFsZyI6ICJSUzI1NiIsCiAgICAgICAgICAgICJuIjogImhZT0otWE9LSVNkTU1TaG5fRzRXOW0yMG1UMFZXdFFCc21CQmtJMmNtUnQ0QWk4QmZZZEhzRnpBdFlLT2pwQlIxUnBLcEptVkt4SUdOeTBnNlozYWQyWFlzaDhLb3dseVZ5OElrWjhOTXdTcmNVSUJaR1lYakhwd2p6dmZHdlhIXzVLSmxuUjNfdVJVcDRaNFVqazJiQ2FLZWdEbjExVjJ2eEU0MWhxYVBVbmhSWnhlMGpSRVRkZHpzRTNtdTFTSzhkVENST2p3VWwxNG1VTm84aVRyVG00bjBxRGFkejhCa1BvLXV2NEJDMGJ1blMwSzNiQV8zVWdWcDd6QmxRRm9GbkxUTzJ1V3BfbXVMRVdHbDY3Z0JxOU1PM2JyS1hmR2hpM2tPenl3endQVHVxLWNWUUR5RU43YUwwU3hDYjNIYzRJZHFEYU1nOHFIVXlPYnBQaXREUSIKICAgICAgICB9CiAgICAgIH0KICAgICAgImRpc3BsYXkiOiB7CiAgICAgICAgIm5hbWUiOiAiTXkgQ2xpZW50IERpc3BsYXkgTmFtZSIsCiAgICAgICAgInVyaSI6ICJodHRwczovL2NsaWVudC5mb28vIgogICAgICB9LAogICAgfSwKICAgICJzdWJqZWN0IjogewogICAgICAgICJmb3JtYXRzIjogWyJpc3Nfc3ViIiwgIm9wYXF1ZSJdCiAgICB9Cn0K.MwNoVMQp5hVxI0mCs9LlOUdFtkDXaA1_eTvOXq7DOGrtDKH7q4vP2xUq3fH2jRAZqnobo0WdPP3eM3NH5QUjW8pa6_QpwdIWkK7r-u_52puE0lPBp7J4U2w4l9gIbg8iknsmWmXeY5F6wiGT8ptfuEYGgmloAJd9LIeNvD3ULW2h2dz1Pn2eDnbyvgB0Ugae0BoZB4f69fKWj8Z9wvTIjk1LZJN1PcL7_zT8Lrlic9aPyzT7Q9ovkd1s-4whE7TrnGUzFc5mgWUn_gsOpsP5mIIljoEEv-FqOW2RyNYulOZl0Q8EnnDHV_vPzrHlUarbGg4YffgtwkQhdK72-JOxYQ`} mdxType=\"Code\" />\n    <p>{`To support this method, the AS needs to check for the content type of `}<inlineCode parentName=\"p\">{`application/jose`}</inlineCode>{` and parse the payload out of the JWS to use as input to the AS. When using this method with a `}<inlineCode parentName=\"p\">{`GET`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`HEAD`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`DELETE`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`OPTIONS`}</inlineCode>{`, or other non-body call, the client instance instead uses the detached JWS method, above.`}</p>\n    <h1>{`Sending Requests with Access Tokens`}</h1>\n    <p>{`To send a request to an RS, the client instance also has to protect the value of the access token by the signature method. For HTTP Message Signatures, this means also signing the `}<inlineCode parentName=\"p\">{`Authorization`}</inlineCode>{` header. For the JOSE methods, this means adding an `}<inlineCode parentName=\"p\">{`ath`}</inlineCode>{` field to the JWS header that includes the SHA256 hash of the access token's value. An example of the HTTP Signature method is shown here.`}</p>\n    <Code from=\"client\" to=\"as\" language='http' codeString={`GET /resource HTTP/1.1\nHost: resources.example.com\nSignature-Input: gnap=(\"@request-target\" \"host\" \"authorization\");created=1624564850;keyid=\"xyz-client\"\nSignature: gnap=:EN/rExQ/knVi61P5AFhyMGN7aVPzk/9C7nsYAWF2RvzsoV1uNxGZklM55qCIQpuhoNty4EhiH7iwuzZBbRCQcQ==:\nAuthorization: GNAP OS9M2PMHKUR64TB8N6BW7OZB8CDFONP219RP1LT0`} mdxType=\"Code\" />\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      ","import { Link, graphql } from 'gatsby'\nimport { Location } from '@reach/router';\nimport PropTypes from 'prop-types'\nimport React from 'react'\n\nconst menuLinks = [\n      {\n        name: 'Request',\n        link: '/transactionrequest/'\n      },\n      {\n        name: 'Continue',\n        link: '/continue/'\n      },\n      {\n        name: 'Response',\n        link: '/transactionresponse/'\n      },\n      {\n        name: 'Interaction',\n        link: '/interaction/'\n      },\n      {\n        name: 'Keys',\n        link: '/keys/'\n      },\n      {\n        name: 'Tokens',\n        link: '/tokens/'\n      },\n      {\n        name: 'Discovery',\n        link: '/discovery/'\n      },\n      {\n        name: 'Other Specs',\n        link: '/specs/'\n      },\n      {\n        name: 'About',\n        link: '/about/'\n      },\n]\n\nconst Header = ({ location }) => (\n  <div className=\"header\">\n    <div className=\"wrapper\">\n      <h1 style={{ margin: 0 }}>\n        <Link\n          to=\"/\"\n          style={{\n            color: 'white',\n            textDecoration: 'none',\n          }}\n        >\n          <img src=\"/xyz.png\" alt=\"XYZ\" className=\"logo\" />\n          XYZ: Implementing GNAP\n        </Link>\n      </h1>\n          <nav>\n            {\n              menuLinks.map(link =>\n                  <Link to={link.link}><span>&raquo;</span> {link.name}</Link>\n              )\n            }\n          </nav>\n    </div>\n    <div class=\"subnav\">\n            \n    </div>\n  </div>\n)\n\nexport default Header\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { StaticQuery, graphql } from 'gatsby'\n\nimport Header from './header'\nimport 'bootstrap/dist/css/bootstrap.css'\nimport './layout.css'\n\nconst Layout = ({ children }) => (\n      <>\n        <Header/>\n        <div\n          style={{\n            margin: '0 auto',\n            maxWidth: 960,\n            padding: '0px 1.0875rem 1.45rem',\n            paddingTop: 0,\n          }}\n        >\n          {children}\n        </div>\n      </>\n)\n\nLayout.propTypes = {\n  children: PropTypes.node.isRequired,\n}\n\nexport default Layout\n"],"sourceRoot":""}