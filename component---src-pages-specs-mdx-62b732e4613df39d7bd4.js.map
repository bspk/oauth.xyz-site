{"version":3,"sources":["webpack:///./src/pages/specs.mdx"],"names":["layoutProps","MDXContent","props","layout","DefaultLayout","render","this","components","name","Layout","Object","assign","title","keywords","parentName","to","React","Component","_frontmatter"],"mappings":"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","file":"component---src-pages-specs-mdx-62b732e4613df39d7bd4.js","sourcesContent":["import React from 'react'\nimport { MDXTag } from '@mdx-js/tag'\n\n\nimport DefaultLayout from \"/Users/jricher/Projects/oauth.xyz-site/src/components/layout.js\";\nimport { Link } from 'gatsby';\nimport Code from \"../components/code\";\nimport SEO from '../components/seo';\nconst layoutProps = {};\nexport default class MDXContent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.layout = DefaultLayout;\n  }\n\n  render() {\n    const {\n      components,\n      ...props\n    } = this.props;\n    return <MDXTag name=\"wrapper\" Layout={this.layout} layoutProps={Object.assign({}, layoutProps, props)} components={components}>\n\n\n      <SEO title=\"Interaction\" keywords={['oauth', 'authorization', 'security']} />\n      <MDXTag name=\"h1\" components={components}>{`Relationship to Other Specifications`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`The XYZ protocol is an attempt to pull together functionality from many different extensions and deployments of OAuth 2. Here, we'll try to map specific concepts from these different protocols into the XYZ system. `}</MDXTag>\n      <MDXTag name=\"h2\" components={components}>{`Scopes`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`The `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`scope`}</MDXTag>{` parameter in OAuth 2 lets a client specify a set of strings to describe the kind of access it wants. While XYZ allows for a much richer set of authorization details to be requested, scopes are a nice simplification for client developers talking to a known API.`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`XYZ allows this simplification through the use of resource handles, which can be specified by the AS and used in lieu of a resources object. After all, a scope value is nothing more than a shorthand for a specific set of authorizations being requested. So to translate an OAuth 2 request of `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`scope=foo bar baz`}</MDXTag>{`, you simply request `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`resources=[foo, bar, baz]`}</MDXTag>{` instead.`}</MDXTag>\n      <MDXTag name=\"h2\" components={components}>{`Auth Code`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`The `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`redirect`}</MDXTag>{` `}<Link to=\"/interaction\">{`interaction mechanism`}</Link>{` with a `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`callback`}</MDXTag>{` return method allows a client to send a user to interact using HTTP redirects, and for the most part this should be indistinguishable from the authorization code flow in OAuth 2. The key difference is what gets sent in the front channel. In OAuth 2, the client has to send a lot of sensitive information through the browser, including the scopes it's asking for and its own identity. In XYZ, the client simply goes to an opaque URL that it is given in direct response to its transaction request. The interaction reference returned is equivalent to the authorization code itself, and this handle is useful only in the context of a current transaction. Furthermore, the interaction reference is cryptographically bound to a set of secrets known to the client and AS at runtime.`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`This type of interaction can be used for web servers, SPA's, and native applications without modification. In fact, most of the differences between these types of clients are in the ways that they can manage keys and secrets. Since the binding of keys and the mode of interaction are separated in XYZ, they can be combined in ways that make the most sense for the client at hand without changing to a different grant type like in OAuth 2.`}</MDXTag>\n      <MDXTag name=\"h2\" components={components}>{`Device Flow`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`Similarly to the authorization code grant, the device grant simply makes use of the `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`user_code`}</MDXTag>{` `}<Link to=\"/interaction\">{`interaction mechanism`}</Link>{` along with polling. There is no longer a need for a separate \"device\" endpoint because the transaction endpoint covers both this functionality as well as token endpoint functionality. There also does not need to be a separate URL that combines the user code and its delivery URL because the arbitrary URL in the `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`redirect`}</MDXTag>{` method can fill this need without the same security issues that a combined URL would have.`}</MDXTag>\n      <MDXTag name=\"h2\" components={components}>{`Client Credentials`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`The client credentials grant in XYZ is simply one that does not require user interaction, nor does it require any information about the user. In other words, neither a `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`user`}</MDXTag>{` nor `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`interaction`}</MDXTag>{` section are included in the `}<Link to=\"/transactionrequest\">{`transaction request`}</Link>{`. `}</MDXTag>\n      <MDXTag name=\"blockquote\" components={components}>\n        <MDXTag name=\"p\" components={components} parentName=\"blockquote\">{`We could even include the `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`user`}</MDXTag>{` section with a value of `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`false`}</MDXTag>{` to specifically signal this mode.`}</MDXTag>\n      </MDXTag>\n      <MDXTag name=\"h2\" components={components}>{`Resource Owner and Assertion`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`The resource owner grant could be replicated in XYZ by presenting the user's credentials as part of the `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`user`}</MDXTag>{` section of the transaction request. However, even more powerfully, the client can present a wide variety of verifiable assertions in this section for the AS to validate and interpret as it sees fit. Chained authorization and authentication are possible in this way, as are forms of linked delegation for cases where the client already knows who the user is and has the authority to do something on their behalf, but needs to translate the authentication to something that can be used further downstream. Additionally, the client could participate in a challenge-response protocol, prompting the user and user's device. These are all part of the various `}<Link to=\"/interaction\">{`interaction methods`}</Link>{` for the client.`}</MDXTag>\n      <MDXTag name=\"h2\" components={components}>{`Dynamic Registration`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`OAuth 2 makes the assumption that all clients have been registered with the authorization server ahead of time, and that this registration includes a wide swath of information about the client software, including its capabilities, its keys, its identity, and other items. This assumption lead to the development of the dynamic registration protocol to allow client instances to be managed at runtime, but at the cost of an additional round trip.`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`In XYZ, the client has the choice of presenting all of this information during the transaction request. This dynamic request can be bound to keys during the transaction itself, and these keys can be created by the client instance (as would be likely in a native application) or supplied during the transaction response (as would potentially be the case with an SPA). These keys identify the instance, and the AS can return a client handle that the client can use to identify itself in future transactions. `}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`Static registration is of course still possible, with the client or developer being issued a client handle out of band and the client presenting that handle during its transaction request. Similarly, this handle can be pre-bound to keys and interaction methods, effectively locking down a client's runtime behavior when such a lock is desired. `}</MDXTag>\n      <MDXTag name=\"h2\" components={components}>{`UMA`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`UMA's pattern of giving the client a `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`ticket`}</MDXTag>{` to present claims for, either proactively or interactively, closely matches XYZ's transactional model. UMA's more complex resource description can be incorporated into XYZ's `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`resources`}</MDXTag>{` section. If the client wants to represent the same user over time, the AS can issue a user handle much like UMA's PCT. `}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`The main component that's missing would be to allow an RS to start a transaction and hand that transaction handle to the client, and this could potentially be built up using the resource handle. `}</MDXTag>\n      <MDXTag name=\"h2\" components={components}>{`Identity and OpenID Connect`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`The main addition that OpenID Connect brings is the ability to pass identity information to the client. An XYZ-based identity protocol could be as simple as returning an identity assertion alongside the access token using the `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`claims`}</MDXTag>{` request, much in the same way the ID Token is returned in OpenID Connect today. Similarly, the UserInfo Endpoint remains a standardized resource server that behaves the same as it does today.`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`Many of the additional mechanisms in OpenID Connect can be incorporated into the transaction request instead of being passed through the browser, including any `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`prompt`}</MDXTag>{`, `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`login_hint`}</MDXTag>{`, or vectors of trust parameters. Additionally, the `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`claims`}</MDXTag>{` mechanism can be readily incorporated into the `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`resources`}</MDXTag>{` portion of the request. `}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`Other mechanisms in OpenID Connect become unnecessary additions, including the request object and hybrid signed response modes. Many of these components were intend to overcome shortcomings in the OAuth 2 protocol that XYZ does not share. `}</MDXTag>\n      <MDXTag name=\"h2\" components={components}>{`CIBA`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`CIBA maps to XYZ's `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`device`}</MDXTag>{` style interaction method, since the user is going to interact with the AS using a secondary application. User information and hints about the intended account can be pushed in the `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`user`}</MDXTag>{` section of the transaction request. `}</MDXTag>\n      <MDXTag name=\"h2\" components={components}>{`FAPI Request Object Endpoint and JARM`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`OpenID Connect's Request Object was born of a need to protect a client's request through the browser, and the hybrid flow (later generalized into JARM) provided a means to protect the authorization server's response through the browser. Both of these methods additionally allow a more rich data request through the use of a JSON object instead of plain request parameters. XYZ's transaction model protects this same information by not sending it through the browser redirects in the first place. `}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`FAPI's request object endpoint allows a client to pre-register the request object and pass a reference instead. This type of intent registration is much the same as the transactional model and transaction handle. `}</MDXTag>\n      <MDXTag name=\"h2\" components={components}>{`PKCE`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`PKCE effectively creates an ephemeral key that the client can prove possession of at a later part of the process. With XYZ, the same results are an automatic side effect of the transactional process. The transaction handle is something known only to the client and is never passed through the front channel, and any interaction reference returned from the interaction endpoint makes sense only in the context of a specific transaction. Furthermore, the client's own keys can be bound to the transaction, making it even more difficult for an attacker to make use of a stolen interaction reference. `}</MDXTag>\n      <MDXTag name=\"h2\" components={components}>{`PoP`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`The main goal of of OAuth 2's Proof of Possession extension work is to bind a set of runtime keys that the client can prove possession of to the token issued to the client. XYZ allows a client to bind keys during its transacton request, and these keys can be further bound to the access token. `}</MDXTag>\n      <MDXTag name=\"h2\" components={components}>{`JAR, PAR, and RAR`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`The JAR specification provides a means to protect content in the front channel, which XYZ avoids in the first place. However, in combination with the PAR specification, the two provide a way to do a back channel intent registration that is in line with XYZ's `}<Link to=\"/transactionrequest\">{`transaction request`}</Link>{` pattern. `}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`The RAR specification is being developed in parallel with XYZ, and its internal content is set to mimic the `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`resources`}</MDXTag>{` field of an XYZ transaction. A key difference is that XYZ does not also have to contend with `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`scope`}</MDXTag>{`, `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`resource`}</MDXTag>{`, `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`aud`}</MDXTag>{`, and other values that the RAR spec does in OAuth 2.`}</MDXTag>\n      <MDXTag name=\"h2\" components={components}>{`Client ID`}</MDXTag>\n      <MDXTag name=\"p\" components={components}>{`The client ID in OAuth 2 is important to the protocol because it allows the client to identify itself during the initial front channel requests where it cannot authenticate itself. In XYZ, the client starts talking in the back channel where it can always authenticate itself. If the AS recognizes the authentication of a specific key, it can tie the request to a set of policies bound to that key's ID. If the key has been registered with the server, the client can send the key handle instead. In this way, the key handle acts much like the client ID used to. If the AS chooses, it can associate an internal identifier to a client, or set of clients, but the protocol no longer needs to be exposed to this detail.`}</MDXTag>\n           </MDXTag>;\n  }\n\n}\nexport const _frontmatter = {};\n    "],"sourceRoot":""}